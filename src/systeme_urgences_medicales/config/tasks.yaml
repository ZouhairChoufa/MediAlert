---
creer_l_alerte:
  description: 'Générer une alerte d''urgence pour un patient du nom et prénom: {nom_prenom},
    âge:{age}, et le sexe:{sexe} avec les symptômes suivants : {symptomes} et localisé
    à : {localisation} et avec le niveau d''urgence :{nv_urgence}'
  expected_output: 'Une alerte d''urgence médicale structurée avec les informations
    complètes du patient: identité, âge, sexe, symptômes détaillés, localisation précise
    et niveau d''urgence évalué'
  agent: agentpatient
triage_patients_et_selection_ambulance:
  description: Analyser toutes les alertes actives et les trier selon 1) le niveau
    d’urgence médicale, 2) la distance ambulance–patient, 3) la disponibilité ambulance,
    puis recommander l’ambulance optimale pour chaque patient en tenant compte des
    conflits et des priorités. En cas de réceptions simultanées de plusieurs alertes,
    appliquer une priorisation stricte par niveau d’urgence (du plus critique au moins
    urgent) avant toute autre règle; en cas d’égalité, départager par ETA minimale
    puis par charge opérationnelle de l’ambulance. Pour chaque patient trié, récupérer
    et transmettre également la liste des hôpitaux disposant de lits disponibles,
    avec le service pertinent (ex. cardio, neuro, trauma) et la charge actuelle
  expected_output: "Pour chaque patient, produire un objet structuré contenant: priorité,
    ambulance recommandée (avec ETA), justification de la recommandation, et la liste
    des hôpitaux actuellement disponibles (id, nom, distance/ETA, spécialité/plateau
    technique pertinent, lits libres, taux d’occupation).\uFEFF\nGuardrail recommandé\n[Assurer
    que la sortie est un JSON valide sous la forme {\"patients\":...\uFEFF} et que
    chaque patient contient id_patient, priorite, ambulance_id, eta_minutes, justification,
    hopitaux_disponibles (liste non vide).]"
  agent: agentcordonnateur
  context:
  - creer_l_alerte
valider_la_demande_du_coordonnateur:
  description: "Après réception de la localisation du patient et de l’hôpital cible
    validées par le coordonnateur, confirmer la disponibilité de l’équipage, calculer
    l’itinéraire optimal, estimer l’ETA (aller et retour si requis) et déclencher
    le départ. Synchroniser en temps réel l’ETA avec l’hôpital. En cas d’indisponibilité
    ou d’incident (trafic, panne, patient déjà pris en charge), proposer automatiquement
    une ambulance ou un itinéraire alternatif et notifier le coordonnateur ainsi que
    l’hôpital.\uFEFF"
  expected_output: "Confirmation du transport incluant l’hôpital sélectionné, l’ambulance
    affectée, l’itinéraire choisi, l’ETA estimée, l’heure de départ et l’état de synchronisation
    des données transmises à l’hôpital de destination. En cas d’échec, fournir le
    motif détaillé et une recommandation alternative.\nGuardrail\nAssurer que la sortie
    est un JSON valide et que les champs obligatoires suivants sont présents: id_patient,
    ambulance_id, hopital_id, eta_minutes, depart_heure_iso, itineraire_polyline (ou
    waypoints), statut (\"confirme\"|\"echec\"), message.\uFEFF"
  agent: agentambulence
  context:
  - triage_patients_et_selection_ambulance
recevoir_les_patients:
  description: "Recevoir la demande de transfert en tenant compte que le lit est déjà
    garanti par le coordonnateur. Préparer l’équipe d’accueil (urgentiste, spécialité,
    imagerie) et les ressources nécessaires, confirmer l’heure d’arrivée prévue, et
    maintenir la disponibilité du lit jusqu’à l’admission. En cas d’imprévu local
    (ex. blocage technique), alerter immédiatement le coordonnateur pour réacheminer
    si besoin.\uFEFF"
  expected_output: "Confirmation d’admission avec lit garanti, équipe mobilisée, ressources
    préparées, heure d’arrivée prévue, et message de synchronisation; ou alerte d’imprévu
    avec recommandation de réacheminement.\uFEFF\n\nGuardrail (hôpital)\n[Sortie JSON
    valide contenant obligatoirement: id_patient, hopital_id, statut (\"pret\"), lit_id,
    service, heure_arrivee_prevue_iso, equipe, ressources[], message. En cas d’imprévu:
    statut=\"imprevu\", raison, action_recommandee.]"
  agent: agenthopital
  context:
  - valider_la_demande_du_coordonnateur
analyse_medicale_d_urgence:
  description: Analyser les informations médicales fournies en situation d'urgence
    afin d'évaluer l'état du patient, formuler rapidement un diagnostic différentiel,
    identifier les priorités thérapeutiques et proposer les premières étapes de prise
    en charge adaptées à la gravité et à la pathologie suspectée
  expected_output: Synthèse structurée du dossier médical reçu, diagnostic différentiel
    listé clairement, priorités de prise en charge d'urgence, protocoles ou recommandations
    de traitements immédiats, conseils supplémentaires à destination des équipes d'urgence
    ou du médecin demandeur
  agent: agentmedecinurgence
  context:
  - recevoir_les_patients
traitement_du_specialiste:
  description: Mettre en place et suivre le traitement médical ou interventionnel
    indiqué par le spécialiste à la suite de l'analyse du dossier. Assurer la communication
    avec l'équipe de soins, ajuster les prescriptions si nécessaire et surveiller
    l'évolution du patient selon les protocoles spécifiques
  expected_output: Plan de traitement détaillé adapté à la situation du patient, ordonnances
    ou protocoles rédigés clairement, indications précises pour la surveillance et
    l'ajustement du traitement, compte-rendu à destination du médecin référent et/ou
    de l'équipe soignante
  agent: agentmedecinspecialiste
  context:
  - analyse_medicale_d_urgence
